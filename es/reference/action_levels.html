<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="es"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='La función action_levels() trabaja con el argumento actions que está
presente en la función create_agent() y en cada función de paso de
validación (que también tiene un argumento actions). Con él, podemos
proporcionar niveles de umbral falla para cualquier combinación de
estados de warn, stop o notify.
Podemos reaccionar ante cualquier entrada de un estado proporcionando las
funciones correspondientes al argumento fns. Se someterán a evaluación en
el momento en que se ingrese al estado de coincidencia. Si se proporciona a
create_agent(), las políticas se aplicarán a cada paso de validación,
actuando de forma predeterminada para la validación en su conjunto.
Las llamadas de action_levels() también podrían aplicarse directamente a
cualquier paso de validación y esto actuará como una anulación si se
establece también en create_agent(). Se requiere el uso de
action_levels() para tener efectos secundarios útiles (es decir,
advertencias, errores de lanzamiento) en el caso de funciones de validación
que operan directamente sobre los datos (p. Ej., mtcars %&amp;gt;% col_vals_lt("mpg", 35)). Hay dos funciones auxiliares que son convenientes
cuando se usan funciones de validación directamente en datos (el flujo de
trabajo sin agent): warn_on_fail() y stop_on_fail(). Estos ayudantes
advierten o se detienen (el umbral de falla predeterminado para cada uno se
establece en 1) y lo hacen con advertencias informativas o mensajes de
error. El ayudante stop_on_fail() se aplica de forma predeterminada cuando
se utilizan funciones de validación directamente en los datos (se proporciona
más información sobre esto en Detalles).'><title>Establecer niveles de acción: umbrales de falla y funciones para invocar — action_levels • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Establecer niveles de acción: umbrales de falla y funciones para invocar — action_levels"><meta property="og:description" content='La función action_levels() trabaja con el argumento actions que está
presente en la función create_agent() y en cada función de paso de
validación (que también tiene un argumento actions). Con él, podemos
proporcionar niveles de umbral falla para cualquier combinación de
estados de warn, stop o notify.
Podemos reaccionar ante cualquier entrada de un estado proporcionando las
funciones correspondientes al argumento fns. Se someterán a evaluación en
el momento en que se ingrese al estado de coincidencia. Si se proporciona a
create_agent(), las políticas se aplicarán a cada paso de validación,
actuando de forma predeterminada para la validación en su conjunto.
Las llamadas de action_levels() también podrían aplicarse directamente a
cualquier paso de validación y esto actuará como una anulación si se
establece también en create_agent(). Se requiere el uso de
action_levels() para tener efectos secundarios útiles (es decir,
advertencias, errores de lanzamiento) en el caso de funciones de validación
que operan directamente sobre los datos (p. Ej., mtcars %&amp;gt;% col_vals_lt("mpg", 35)). Hay dos funciones auxiliares que son convenientes
cuando se usan funciones de validación directamente en datos (el flujo de
trabajo sin agent): warn_on_fail() y stop_on_fail(). Estos ayudantes
advierten o se detienen (el umbral de falla predeterminado para cada uno se
establece en 1) y lo hacen con advertencias informativas o mensajes de
error. El ayudante stop_on_fail() se aplica de forma predeterminada cuando
se utilizan funciones de validación directamente en los datos (se proporciona
más información sobre esto en Detalles).'><meta property="og:image" content="https://rich-iannone.github.io/pointblank/es/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Ir al contenido</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Cambiar la navegación">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Flujos de trabajo de validación</h6>
    <a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a>
    <a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Informes sobre la calidad de los datos</a>
    <a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Validación de datos en los pipelines</a>
    <a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectativas en las pruebas unitarias</a>
    <a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Pruebas de datos para condicionales</a>
    <a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a>
    <a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: Validación de documentos R Markdown</a>
    <h6 class="dropdown-header" data-toc-skip>Gestión de la información</h6>
    <a class="dropdown-item" href="../articles/INFO-1.html">Introducción a la gestión de la información</a>
    <a class="dropdown-item" href="../articles/INFO-2.html">Temas avanzados de gestión de la información</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://rich-iannone.github.io/pointblank">In English</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Cambiar la navegación" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Buscar" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rich-iannone/pointblank/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Establecer niveles de acción: umbrales de falla y funciones para invocar</h1>
      <small class="dont-index">Código: <a href="https://github.com/rich-iannone/pointblank/blob/HEAD/R/action_levels.R" class="external-link"><code>R/action_levels.R</code></a></small>
      <div class="d-none name"><code>action_levels.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>La función <code>action_levels()</code> trabaja con el argumento <code>actions</code> que está
presente en la función <code><a href="create_agent.html">create_agent()</a></code> y en cada función de paso de
validación (que también tiene un argumento <code>actions</code>). Con él, podemos
proporcionar niveles de umbral <em>falla</em> para cualquier combinación de
estados de <code>warn</code>, <code>stop</code> o <code>notify</code>.</p>
<p>Podemos reaccionar ante cualquier entrada de un estado proporcionando las
funciones correspondientes al argumento <code>fns</code>. Se someterán a evaluación en
el momento en que se ingrese al estado de coincidencia. Si se proporciona a
<code><a href="create_agent.html">create_agent()</a></code>, las políticas se aplicarán a cada paso de validación,
actuando de forma predeterminada para la validación en su conjunto.</p>
<p>Las llamadas de <code>action_levels()</code> también podrían aplicarse directamente a
cualquier paso de validación y esto actuará como una anulación si se
establece también en <code><a href="create_agent.html">create_agent()</a></code>. Se requiere el uso de
<code>action_levels()</code> para tener efectos secundarios útiles (es decir,
advertencias, errores de lanzamiento) en el caso de funciones de validación
que operan directamente sobre los datos (p. Ej., <code>mtcars %&gt;% col_vals_lt("mpg", 35)</code>). Hay dos funciones auxiliares que son convenientes
cuando se usan funciones de validación directamente en datos (el flujo de
trabajo sin <code>agent</code>): <code>warn_on_fail()</code> y <code>stop_on_fail()</code>. Estos ayudantes
advierten o se detienen (el umbral de falla predeterminado para cada uno se
establece en <code>1</code>) y lo hacen con advertencias informativas o mensajes de
error. El ayudante <code>stop_on_fail()</code> se aplica de forma predeterminada cuando
se utilizan funciones de validación directamente en los datos (se proporciona
más información sobre esto en <em>Detalles</em>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Uso<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">action_levels</span><span class="op">(</span>warn_at <span class="op">=</span> <span class="cn">NULL</span>, stop_at <span class="op">=</span> <span class="cn">NULL</span>, notify_at <span class="op">=</span> <span class="cn">NULL</span>, fns <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>

<span class="fu">warn_on_fail</span><span class="op">(</span>warn_at <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="fu">stop_on_fail</span><span class="op">(</span>stop_at <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="argumentos">Argumentos<a class="anchor" aria-label="anchor" href="#argumentos"></a></h2>
    <dl><dt>warn_at, stop_at, notify_at</dt>
<dd><p>El número de umbral o fracción de unidades
de prueba que pueden proporcionar una <em>fallar</em> resultado antes de entrar en
las <code>warn</code>, <code>stop</code> o <code>notify</code> estados de fallo. Si este es un valor decimal
entre <code>0</code> y <code>1</code> entonces es un umbral de falla proporcional (por ejemplo,
<code>0.15</code> indica que si se encuentra que el 15% por ciento de las unidades de
prueba <em>fallan</em>, entonces se ingresa el estado de falla designado). En <code>1</code>
su lugar, se pueden usar valores absolutos a partir de, y esto constituye
un umbral de falla absoluto (por ejemplo, <code>10</code> significa que si se
encuentra que 10 de las unidades de prueba fallan , se ingresa el estado de
falla).</p></dd>
<dt>fns</dt>
<dd><p>Una lista nombrada de funciones que se emparejará con los estados
de falla apropiados. La sintaxis para esta lista implica el uso de nombres
de estado fracaso desde el conjunto de <code>warn</code>, <code>stop</code> y <code>notify</code>. Las
funciones correspondientes a los estados de falla se proporcionan como
fórmulas (por ejemplo <code>list(warn = ~ warning("Too many failures."))</code>). Se
puede usar una serie de expresiones para cada estado nombrado encerrando el
conjunto de declaraciones con <code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{ }</a></code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="detalles">Detalles<a class="anchor" aria-label="anchor" href="#detalles"></a></h2>
    <p>El resultado de la <code>action_levels()</code> llamada actionsse interpretará de forma
ligeramente diferente si se usa un agente o se usan funciones de validación
directamente en una tabla de datos. Por conveniencia, cuando se trabaja
directamente con datos, cualquier valor suministrado <code>warn_at</code> o <code>stop_at</code> se
le asignará automáticamente un stock <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> o <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> función. Por
ejemplo, el uso <code>small_table %&gt;% col_is_integer("date")</code> proporcionará un
mensaje de detención detallado de forma predeterminada, que indica el motivo
del error. Si tuviera que suministrar el <code>fns</code> for <code>stop</code> o <code>warn</code>
manualmente, las funciones de stock se anularían. Además, si actionses <code>NULL</code>
en este flujo de trabajo (el predeterminado), pointblank usará un <code>stop_at</code>
valor de <code>1</code> (que proporciona un mensaje de error detallado y específico del
contexto si hay unidades que <em>fallan</em>). Podemos suprimir absolutamente este
comportamiento de parada automática en cada paso de validación mediante la
configuración <code>active = FALSE</code>. En este caso de datos interactivos, no se
proporciona una función de stock para <code>notify_at</code>. El notifyestado de falla
se usa con menos frecuencia en este flujo de trabajo que en el basado en
agente .</p>
<p>Cuando se utiliza un agente , a menudo opta por no utilizar ninguna función
en la <code>fns</code> que el <code>warn</code>, <code>stop</code> y <code>notify</code> serán reportados en los estados
de insuficiencia cuando se usa <code>create_agent_report()</code> (y, por lo general eso
es suficiente). En cambio, usar el <code>end_fns</code> argumento es una mejor opción,
ya que ese esquema proporciona datos útiles sobre todo el interrogatorio, lo
que permite un control más preciso de los efectos secundarios y reduce la
posibilidad de duplicar los efectos secundarios.</p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>1-5</p>
    </div>
    <div class="section level2">
    <h2 id="ver-tambi-n">Ver también<a class="anchor" aria-label="anchor" href="#ver-tambi-n"></a></h2>
    <div class="dont-index"><p>Other Planning and Prep: 
<code><a href="create_agent.html">create_agent</a>()</code>,
<code><a href="create_informant.html">create_informant</a>()</code>,
<code><a href="db_tbl.html">db_tbl</a>()</code>,
<code><a href="draft_validation.html">draft_validation</a>()</code>,
<code><a href="file_tbl.html">file_tbl</a>()</code>,
<code><a href="scan_data.html">scan_data</a>()</code>,
<code><a href="tbl_get.html">tbl_get</a>()</code>,
<code><a href="tbl_source.html">tbl_source</a>()</code>,
<code><a href="tbl_store.html">tbl_store</a>()</code>,
<code><a href="validate_rmd.html">validate_rmd</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Ejemplos<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Para estos ejemplos, usaremos el conjunto</span></span>
<span class="r-in"><span class="co"># de datos `small_table` incluido</span></span>
<span class="r-in"><span class="va">small_table</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 13 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    date_time           date           a b             c      d e     f    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2016-01-04 <span style="color: #949494;">11:00:00</span> 2016-01-04     2 1-bcd-345     3  <span style="text-decoration: underline;">3</span>423. TRUE  high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2016-01-04 <span style="color: #949494;">00:32:00</span> 2016-01-04     3 5-egh-163     8 <span style="text-decoration: underline;">10</span>000. TRUE  low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2016-01-05 <span style="color: #949494;">13:32:00</span> 2016-01-05     6 8-kdg-938     3  <span style="text-decoration: underline;">2</span>343. TRUE  high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2016-01-06 <span style="color: #949494;">17:23:00</span> 2016-01-06     2 5-jdo-903    <span style="color: #BB0000;">NA</span>  <span style="text-decoration: underline;">3</span>892. FALSE mid  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2016-01-09 <span style="color: #949494;">12:36:00</span> 2016-01-09     8 3-ldm-038     7   284. TRUE  low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2016-01-11 <span style="color: #949494;">06:15:00</span> 2016-01-11     4 2-dhe-923     4  <span style="text-decoration: underline;">3</span>291. TRUE  mid  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2016-01-15 <span style="color: #949494;">18:46:00</span> 2016-01-15     7 1-knw-093     3   843. TRUE  high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2016-01-17 <span style="color: #949494;">11:27:00</span> 2016-01-17     4 5-boe-639     2  <span style="text-decoration: underline;">1</span>036. FALSE low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2016-01-20 <span style="color: #949494;">04:30:00</span> 2016-01-20     3 5-bce-642     9   838. FALSE high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2016-01-20 <span style="color: #949494;">04:30:00</span> 2016-01-20     3 5-bce-642     9   838. FALSE high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 2016-01-26 <span style="color: #949494;">20:07:00</span> 2016-01-26     4 2-dmx-010     7   834. TRUE  low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 2016-01-28 <span style="color: #949494;">02:51:00</span> 2016-01-28     2 7-dmx-010     8   108. FALSE low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 2016-01-30 <span style="color: #949494;">11:23:00</span> 2016-01-30     1 3-dka-303    <span style="color: #BB0000;">NA</span>  <span style="text-decoration: underline;">2</span>230. TRUE  high </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Crea un objeto `action_levels` con valores</span></span>
<span class="r-in"><span class="co"># fraccionarios para el `warn_at`,</span></span>
<span class="r-in"><span class="co"># `stop_at` y `notify_at` estados</span></span>
<span class="r-in"><span class="va">al</span> <span class="op">&lt;-</span> </span>
<span class="r-in">  <span class="fu">action_levels</span><span class="op">(</span></span>
<span class="r-in">    warn_at <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span class="r-in">    stop_at <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span class="r-in">    notify_at <span class="op">=</span> <span class="fl">0.5</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in">  </span>
<span class="r-in"><span class="co"># Un resumen de la configuración de `al`</span></span>
<span class="r-in"><span class="co"># El objeto se muestra imprimiéndolo</span></span>
<span class="r-in"><span class="va">al</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── The `action_levels` settings ────────────────────────────────────────────────</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">WARN</span> failure threshold of 0.2 of all test units.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">STOP</span> failure threshold of 0.8 of all test units.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">NOTIFY</span> failure threshold of 0.5 of all test units.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────────────────────────────</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Cree un agente a quemarropa y</span></span>
<span class="r-in"><span class="co"># aplicar el objeto `al` a las `actions`;</span></span>
<span class="r-in"><span class="co"># agregue dos pasos de validación y</span></span>
<span class="r-in"><span class="co"># interrogar a la `small_table`</span></span>
<span class="r-in"><span class="va">agent_1</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="create_agent.html">create_agent</a></span><span class="op">(</span></span>
<span class="r-in">    tbl <span class="op">=</span> <span class="va">small_table</span>,</span>
<span class="r-in">    actions <span class="op">=</span> <span class="va">al</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_gt.html">col_vals_gt</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">2</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_lt.html">col_vals_lt</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">20000</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="interrogate.html">interrogate</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># El informe del agente mostrará</span></span>
<span class="r-in"><span class="co"># que se ha entrado en el estado de advertencia</span></span>
<span class="r-in"><span class="co"># para el primer paso de validación pero no</span></span>
<span class="r-in"><span class="co"># el segundo; podemos confirmar esto</span></span>
<span class="r-in"><span class="co"># en la consola inspeccionando el</span></span>
<span class="r-in"><span class="co"># Componente `warn` en la x-list del agente</span></span>
<span class="r-in"><span class="va">x_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_agent_x_list.html">get_agent_x_list</a></span><span class="op">(</span><span class="va">agent_1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x_list</span><span class="op">$</span><span class="va">warn</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE FALSE</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Aplicar el objeto `action_levels`</span></span>
<span class="r-in"><span class="co"># para el agente significa que toda</span></span>
<span class="r-in"><span class="co"># validación los pasos heredarán esta</span></span>
<span class="r-in"><span class="co"># configuración, pero podemos anular</span></span>
<span class="r-in"><span class="co"># esto aplicando otro objeto similar a</span></span>
<span class="r-in"><span class="co"># la validación paso en su lugar (esta</span></span>
<span class="r-in"><span class="co"># vez usando el `warn_on_fail()`</span></span>
<span class="r-in"><span class="co"># abreviatura)</span></span>
<span class="r-in"><span class="va">agent_2</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="create_agent.html">create_agent</a></span><span class="op">(</span></span>
<span class="r-in">    tbl <span class="op">=</span> <span class="va">small_table</span>,</span>
<span class="r-in">    actions <span class="op">=</span> <span class="va">al</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_gt.html">col_vals_gt</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">2</span>,</span>
<span class="r-in">    actions <span class="op">=</span> <span class="fu">warn_on_fail</span><span class="op">(</span>warn_at <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_lt.html">col_vals_lt</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">20000</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="interrogate.html">interrogate</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># En este caso, la primera validación</span></span>
<span class="r-in"><span class="co"># el paso tiene una falla menos estricta</span></span>
<span class="r-in"><span class="co"># umbral para el estado de advertencia y es</span></span>
<span class="r-in"><span class="co"># lo suficientemente alto como para que la</span></span>
<span class="r-in"><span class="co"># condición no sea ingresó; esto se puede</span></span>
<span class="r-in"><span class="co"># confirmar en el consola a través de la</span></span>
<span class="r-in"><span class="co"># inspección de la componente x-list `warn`</span></span>
<span class="r-in"><span class="va">x_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_agent_x_list.html">get_agent_x_list</a></span><span class="op">(</span><span class="va">agent_2</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x_list</span><span class="op">$</span><span class="va">warn</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE FALSE</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># En el contexto del uso de la validación</span></span>
<span class="r-in"><span class="co"># funciona directamente en los datos (es</span></span>
<span class="r-in"><span class="co"># decir, no participación de un agente)</span></span>
<span class="r-in"><span class="co"># queremos desencadenar advertencias y</span></span>
<span class="r-in"><span class="co"># generar errores; los siguiente dará una</span></span>
<span class="r-in"><span class="co"># advertencia si se ejecuta (devolviendo el</span></span>
<span class="r-in"><span class="co"># datos de `small_table`)</span></span>
<span class="r-in"><span class="va">small_table</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_gt.html">col_vals_gt</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">2</span>,</span>
<span class="r-in">    actions <span class="op">=</span> <span class="fu">warn_on_fail</span><span class="op">(</span>warn_at <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Con el mismo oleoducto, no suministrando</span></span>
<span class="r-in"><span class="co"># cualquier cosa para `actions` (es` NULL`</span></span>
<span class="r-in"><span class="co"># por predeterminado) tendrá el mismo</span></span>
<span class="r-in"><span class="co"># efecto que usando `stop_on_fail (stop_at = 1)`</span></span>
<span class="r-in"><span class="va">small_table</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_gt.html">col_vals_gt</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">small_table</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_gt.html">col_vals_gt</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">2</span>,</span>
<span class="r-in">    actions <span class="op">=</span> <span class="fu">stop_on_fail</span><span class="op">(</span>stop_at <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Esto se debe a que el `stop_on_fail()`</span></span>
<span class="r-in"><span class="co"># la llamada se inyecta automáticamente</span></span>
<span class="r-in"><span class="co"># de forma predeterminada caso (cuando</span></span>
<span class="r-in"><span class="co"># se opera con datos) para su conveniencia;</span></span>
<span class="r-in"><span class="co"># detrás de escena un agente secreto' utiliza</span></span>
<span class="r-in"><span class="co"># 'acciones encubiertas': todo para que</span></span>
<span class="r-in"><span class="co"># puedas escribir menos</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>En esta página</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Desarrollado por Richard Iannone, Mauricio Vargas.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Sitio creado con <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

