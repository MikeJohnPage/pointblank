<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="La función create_agent() crea un objeto agent, que se utiliza en un
flujo de trabajo de informes de calidad de datos. El objetivo general de
este flujo de trabajo es generar información de informes útil para evaluar el
nivel de calidad de los datos para la tabla de destino. Podemos proporcionar
tantas funciones de validación como el usuario desee escribir, aumentando así
el nivel de cobertura de validación para esa tabla. El agent asignado por
la llamada create_agent() toma funciones de validación, que se expanden a
los pasos de validación (cada uno está numerado). Este proceso se conoce como
desarrollo de un plan de validación.
Las funciones de validación, cuando se llaman en un agent, son
simplemente instrucciones hasta el punto en que se llama a la función
interrogate(). Eso inicia el proceso del agent actuando sobre el *
plan de validación * y obteniendo resultados para cada paso. Una vez que se
completa el proceso de interrogación, podemos decir que el agent tiene
inteligencia. Llamar al agent en sí mismo dará como resultado una tabla
de informes. También se puede acceder a este informe de la interrogación con
la función get_agent_report(), donde hay más opciones de informe."><title>Crear un objeto pointblank agent — create_agent • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Crear un objeto pointblank agent — create_agent"><meta property="og:description" content="La función create_agent() crea un objeto agent, que se utiliza en un
flujo de trabajo de informes de calidad de datos. El objetivo general de
este flujo de trabajo es generar información de informes útil para evaluar el
nivel de calidad de los datos para la tabla de destino. Podemos proporcionar
tantas funciones de validación como el usuario desee escribir, aumentando así
el nivel de cobertura de validación para esa tabla. El agent asignado por
la llamada create_agent() toma funciones de validación, que se expanden a
los pasos de validación (cada uno está numerado). Este proceso se conoce como
desarrollo de un plan de validación.
Las funciones de validación, cuando se llaman en un agent, son
simplemente instrucciones hasta el punto en que se llama a la función
interrogate(). Eso inicia el proceso del agent actuando sobre el *
plan de validación * y obteniendo resultados para cada paso. Una vez que se
completa el proceso de interrogación, podemos decir que el agent tiene
inteligencia. Llamar al agent en sí mismo dará como resultado una tabla
de informes. También se puede acceder a este informe de la interrogación con
la función get_agent_report(), donde hay más opciones de informe."><meta property="og:image" content="https://rich-iannone.github.io/pointblank/es/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6>
    <a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a>
    <a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a>
    <a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a>
    <a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a>
    <a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a>
    <a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a>
    <a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a>
    <h6 class="dropdown-header" data-toc-skip>Information Management</h6>
    <a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a>
    <a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a>
    <a class="external-link dropdown-item" href="https://rich-iannone.github.io/pointblank">In English</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rich-iannone/pointblank/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Crear un objeto <strong>pointblank</strong> <em>agent</em></h1>
      <small class="dont-index">Source: <a href="https://github.com/rich-iannone/pointblank/blob/HEAD/R/create_agent.R" class="external-link"><code>R/create_agent.R</code></a></small>
      <div class="d-none name"><code>create_agent.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>La función <code>create_agent()</code> crea un objeto <em>agent</em>, que se utiliza en un
flujo de trabajo de <em>informes de calidad de datos</em>. El objetivo general de
este flujo de trabajo es generar información de informes útil para evaluar el
nivel de calidad de los datos para la tabla de destino. Podemos proporcionar
tantas funciones de validación como el usuario desee escribir, aumentando así
el nivel de cobertura de validación para esa tabla. El <em>agent</em> asignado por
la llamada <code>create_agent()</code> toma funciones de validación, que se expanden a
los pasos de validación (cada uno está numerado). Este proceso se conoce como
desarrollo de un <em>plan de validación</em>.</p>
<p>Las funciones de validación, cuando se llaman en un <em>agent</em>, son
simplemente instrucciones hasta el punto en que se llama a la función
<code><a href="interrogate.html">interrogate()</a></code>. Eso inicia el proceso del <em>agent</em> actuando sobre el *
plan de validación * y obteniendo resultados para cada paso. Una vez que se
completa el proceso de interrogación, podemos decir que el <em>agent</em> tiene
inteligencia. Llamar al <em>agent</em> en sí mismo dará como resultado una tabla
de informes. También se puede acceder a este informe de la interrogación con
la función <code><a href="get_agent_report.html">get_agent_report()</a></code>, donde hay más opciones de informe.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">create_agent</span><span class="op">(</span>
  tbl <span class="op">=</span> <span class="cn">NULL</span>,
  read_fn <span class="op">=</span> <span class="cn">NULL</span>,
  tbl_name <span class="op">=</span> <span class="cn">NULL</span>,
  label <span class="op">=</span> <span class="cn">NULL</span>,
  actions <span class="op">=</span> <span class="cn">NULL</span>,
  end_fns <span class="op">=</span> <span class="cn">NULL</span>,
  embed_report <span class="op">=</span> <span class="cn">FALSE</span>,
  lang <span class="op">=</span> <span class="cn">NULL</span>,
  locale <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>tbl</dt>
<dd><p>La tabla de entrada. Puede ser un marco de datos, un tibble, un
objeto <code>tbl_dbi</code> o un objeto <code>tbl_spark</code>. Alternativamente, se puede usar
una función para leer en la tabla de datos de entrada con el argumento
<code>read_fn</code> (en cuyo caso, <code>tbl</code> puede ser <code>NULL</code>).</p></dd>
<dt>read_fn</dt>
<dd><p>Una fórmula de preparación de tablas que se usa para acceder a
la tabla de destino. Incluso si se proporciona un <code>tbl</code>, esta fórmula se
invocará para obtener los datos (es decir, el <code>read_fn</code> tiene prioridad).
Hay dos formas de especificar un <code>read_fn</code>: (1) con una expresión de
fórmula del lado derecho (RHS) (p. Ej., <code>~ {&lt;código de lectura de la tabla&gt;}</code>) o (2) como una función (p. Ej., <code>function () {&lt;código de lectura de la tabla&gt;}</code>).</p></dd>
<dt>tbl_name</dt>
<dd><p>Un nombre opcional para asignar al objeto de la tabla de
entrada. Si no se proporciona ningún valor, se generará un nombre en
función de la información disponible. Este nombre de tabla se mostrará en
el área de encabezado del informe del agente generado al imprimir el
<em>agent</em> o llamar a <code><a href="get_agent_report.html">get_agent_report()</a></code>.</p></dd>
<dt>label</dt>
<dd><p>Una etiqueta opcional para el plan de validación. Si no se
proporciona ningún valor, se generará una etiqueta basada en la hora actual
del sistema. Markdown se puede usar aquí para hacer que la etiqueta sea más
atractiva visualmente (aparecerá en el área de encabezado del informe del
agente).</p></dd>
<dt>actions</dt>
<dd><p>Una opción para incluir una lista con niveles de umbral para
que todos los pasos de validación puedan reaccionar en consecuencia al
exceder los niveles establecidos. Esto se creará con la función auxiliar
<code><a href="action_levels.html">action_levels()</a></code>. Si se utiliza una lista de niveles de acción para un
paso de validación específico, se anulará el conjunto predeterminado
especificado aquí.</p></dd>
<dt>end_fns</dt>
<dd><p>Una lista de expresiones que deben invocarse al final de un
interrogatorio. Cada expresión debe tener la forma de una fórmula R
unilateral, por lo que en general se debe usar esta construcción: <code>end_fns = list (~ &lt;declaraciones R&gt;, ~ &lt;declaraciones R&gt;, ...)</code>. Un ejemplo de una
función incluida en <strong>pointblank</strong> que se puede utilizar con sensatez
aquí es <code><a href="email_blast.html">email_blast()</a></code>, que envía un correo electrónico del informe de
validación (basado en una condición de envío).</p></dd>
<dt>embed_report</dt>
<dd><p>Una opción para incrustar un informe de validación basado
en <strong>gt</strong> en el objeto <code>ptblank_agent</code>. Si es <code>FALSE</code> (el valor
predeterminado), el objeto de la tabla no se generará ni estará disponible
con el <em>agent</em> al regresar del interrogatorio.</p></dd>
<dt>lang</dt>
<dd><p>El idioma que se utilizará para la creación automática de
resúmenes (descripciones breves para cada paso de validación) y para el
<em>informe del agente</em> (una tabla de resumen que proporciona el plan de
validación y los resultados de la interrogación. De forma predeterminada,
<code>NULL</code> creará inglés (<code>"en"</code>) texto. Otras opciones incluyen francés
(<code>"fr"</code>), alemán (<code>"de"</code>), italiano (<code>"it"</code>), español (<code>"es"</code>), portugués
(<code>"pt"</code>), turco (<code>"tr"</code>), chino (<code>"zh"</code>), ruso (<code>"ru"</code>), polaco (<code>"pl"</code>),
danés (<code>"da"</code>) , Sueco (<code>"sv"</code>) y holandés (<code>"nl"</code>).</p></dd>
<dt>locale</dt>
<dd><p>Un ID de configuración regional opcional que se utilizará para
formatear valores en la tabla de resumen <em>informe del agente</em> de acuerdo
con las reglas de la configuración regional. Los ejemplos incluyen
<code>"en_US"</code> para inglés (Estados Unidos) y <code>"fr_FR"</code> para francés (Francia);
más simplemente, puede ser un identificador de idioma sin una designación
de país, como "es" para español (España, igual que <code>"es_ES"</code>).</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Un objeto <code>ptblank_agent</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="data-products-obtained-from-an-agent">Data Products Obtained from an Agent<a class="anchor" aria-label="anchor" href="#data-products-obtained-from-an-agent"></a></h2>
    

<p>Se puede obtener un objeto de lista muy detallado, conocido como x-list,
usando la función <code><a href="get_agent_x_list.html">get_agent_x_list()</a></code> en el <em>agent</em>. Esta fuente de
información puede tomarse como un todo o desglosarse por el número de paso
(con el argumento <code>i</code>).</p>
<p>A veces es útil ver qué filas fallaron. Al usar la función
<code><a href="get_data_extracts.html">get_data_extracts()</a></code> en el <em>agent</em>, obtenemos una lista de tibbles (para
aquellos pasos que tienen extracciones de datos) o un tibble si el paso de
validación se especifica con el argumento <code>i</code>.</p>
<p>Los datos de destino se pueden dividir en partes que representan las
porciones de 'pasa' y 'falla' con la función <code><a href="get_sundered_data.html">get_sundered_data()</a></code>. Un
requisito principal es un agente al que se le haya llamado a <code><a href="interrogate.html">interrogate()</a></code>.
Además, los pasos de validación considerados para esta división de datos
deben ser aquellos que operan en valores en una columna (por ejemplo, las
funciones <code>col_vals_*()</code> o <code><a href="conjointly.html">conjointly()</a></code>). Con estos pasos de validación en
consideración, las filas sin unidades de prueba fallidas en todos los pasos
de validación comprenden la pieza de datos 'aprobada', y las filas con al
menos una unidad de prueba fallida en la misma serie de validaciones
constituyen la pieza 'fallida'.</p>
<p>Si solo necesitamos saber si todas las validaciones pasaron por completo (es
decir, todos los pasos no tenían unidades de prueba fallidas), la función
<code><a href="all_passed.html">all_passed()</a></code> podría usarse en el <em>agent</em>. Sin embargo, en la práctica, no
es frecuente que todos los pasos de validación de datos estén libres de
unidades defectuosas.</p>
<p>Si bien la impresión de un <em>agent</em> mostrará el informe <em>agent</em> en el Viewer,
podemos usar alternativamente <code><a href="get_agent_report.html">get_agent_report()</a></code> para aprovechar otras
opciones (por ejemplo, cambiar el idioma, modificar la disposición de las
filas del informe, etc.) y devolver el informe como objetos independientes.
Por ejemplo, con la opción <code>display_table = TRUE</code> (la predeterminada),
<code><a href="get_agent_report.html">get_agent_report()</a></code> devolverá un objeto de tabla <strong>gt</strong> (<code>"gt_tbl"</code>). Si
<code>display_table</code> se establece en <code>FALSE</code>, obtendremos un marco de datos en su
lugar.</p>
    </div>
    <div class="section level2">
    <h2 id="yaml">YAML<a class="anchor" aria-label="anchor" href="#yaml"></a></h2>
    

<p>Se puede escribir un agente <strong>pointblank</strong> en YAML con <code><a href="yaml_write.html">yaml_write()</a></code> y el
YAML resultante se puede usar para regenerar un agente (con
<code><a href="yaml_read_agent.html">yaml_read_agent()</a></code>) o interrogar la tabla de destino (a través de
<code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate()</a></code>) . Aquí hay un ejemplo de cómo se expresa una
llamada compleja de <code>create_agent()</code> en código R y en la representación YAML
correspondiente.</p><div class="sourceCode"><pre><code># Código R
create_agent(
  read_fn = ~ small_table,
  tbl_name = "small_table",
  label = "Un ejemplo.",
  actions = action_levels(
    warn_at = 0.10,
    stop_at = 0.25,
    notify_at = 0.35
  ), 
  end_fns = list(
    ~ beepr::beep(2),
    ~ Sys.sleep(1)
  ), 
  embed_report = TRUE,
  lang = "fr", 
  locale = "fr_CA"
)

# Representación YAML
type: agent
read_fn: ~small_table
tbl_name: small_table
label: Un ejemplo.
lang: fr
locale: fr_CA
actions:
  warn_fraction: 0.1
stop_fraction: 0.25
notify_fraction: 0.35
end_fns:
- ~beepr::beep(2)
- ~Sys.sleep(1)
embed_report: true
</code></pre></div>

<p>En la práctica, este bloque de YAML será más corto ya que los argumentos con
valores predeterminados no se escribirán en YAML cuando se use <code><a href="yaml_write.html">yaml_write()</a></code>
(aunque es aceptable incluirlos con su valor predeterminado al generar el
YAML por otros medios). El único requisito para escribir la representación
YAML de un <em>agent</em> es tener especificado <code>read_fn</code> (cualquier tabla
proporcionada a <code>tbl</code> es ignorado).</p>
<p>Lo que sigue típicamente a este fragmento de YAML es una parte de "pasos", y
eso corresponde a la adición de pasos de validación a través de funciones de
validación. Los artículos de ayuda para cada función de validación tienen una
sección <em>YAML</em> que describe cómo una función de validación determinada se
traduce a YAML.</p>
<p>Si necesita obtener una vista previa de la transformación de un <em>agent</em> a
YAML (sin enviar nada al disco), use la función <code><a href="yaml_agent_string.html">yaml_agent_string()</a></code>. Si ya
tiene un archivo <code>.yml</code> que contiene un <em>agent</em>, puede echar un vistazo a las
expresiones R que se utilizan para regenerar ese agente con
<code><a href="yaml_agent_show_exprs.html">yaml_agent_show_exprs()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="escribir-un-agente-en-el-disco">Escribir un agente en el disco<a class="anchor" aria-label="anchor" href="#escribir-un-agente-en-el-disco"></a></h2>
    

<p>Se puede escribir un objeto <em>agent</em> en el disco con la función
<code><a href="x_write_disk.html">x_write_disk()</a></code>. Esto puede resultar útil para mantener un historial de
validaciones y generar vistas de la calidad de los datos a lo largo del
tiempo. Los agentes se almacenan en formato RDS serializado y se pueden
recuperar fácilmente con la función <code><a href="x_read_disk.html">x_read_disk()</a></code>.</p>
<p>Se recomienda que las fórmulas de preparación de tablas se proporcionen al
argumento <code>read_fn</code> de <code>create_agent()</code>. De esta manera, cuando se lee un
<em>agent</em> desde el disco a través de <code><a href="x_read_disk.html">x_read_disk()</a></code>, se puede reutilizar para
acceder a la tabla de destino (que puede cambiar, de ahí la necesidad de usar
una expresión para esto).</p>
    </div>
    <div class="section level2">
    <h2 id="combinaci-n-de-varios-agentes-en-un-objeto-multiagent">Combinación de varios agentes en un objeto <em>multiagent</em><a class="anchor" aria-label="anchor" href="#combinaci-n-de-varios-agentes-en-un-objeto-multiagent"></a></h2>
    

<p>Varios objetos <em>agent</em> pueden formar parte de un objeto <em>agent</em> múltiple, y
se pueden usar dos funciones para esto: <code><a href="create_multiagent.html">create_multiagent()</a></code> y
<code><a href="read_disk_multiagent.html">read_disk_multiagent()</a></code>. Al recopilar varios agentes que han realizado
interrogaciones en el pasado, podemos obtener un informe <em>multiagent</em> que
muestra cómo evolucionó la calidad de los datos con el tiempo. Este caso de
uso es interesante para el control y la gestión de la calidad de los datos, y
los informes (que se pueden personalizar con <code><a href="get_multiagent_report.html">get_multiagent_report()</a></code>) son
sólidos frente a los cambios en los pasos de validación para una tabla de
destino determinada.</p>
    </div>
    <div class="section level2">
    <h2 id="figures">Figures<a class="anchor" aria-label="anchor" href="#figures"></a></h2>
    

<p><img src="figures/man_create_agent_1.png" width="100%"></p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>1-2</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Planning and Prep: 
<code><a href="action_levels.html">action_levels</a>()</code>,
<code><a href="create_informant.html">create_informant</a>()</code>,
<code><a href="db_tbl.html">db_tbl</a>()</code>,
<code><a href="draft_validation.html">draft_validation</a>()</code>,
<code><a href="file_tbl.html">file_tbl</a>()</code>,
<code><a href="scan_data.html">scan_data</a>()</code>,
<code><a href="tbl_get.html">tbl_get</a>()</code>,
<code><a href="tbl_source.html">tbl_source</a>()</code>,
<code><a href="tbl_store.html">tbl_store</a>()</code>,
<code><a href="validate_rmd.html">validate_rmd</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Analicemos un análisis de la calidad de</span></span>
<span class="r-in"><span class="co"># los datos de una tabla extremadamente pequeña;</span></span>
<span class="r-in"><span class="co"># en realidad se llama `small_table` y podemos</span></span>
<span class="r-in"><span class="co"># encontrarlo como un conjunto de datos en</span></span>
<span class="r-in"><span class="co"># este paquete</span></span>
<span class="r-in"><span class="va">small_table</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 13 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    date_time           date           a b             c      d e     f    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2016-01-04 <span style="color: #949494;">11:00:00</span> 2016-01-04     2 1-bcd-345     3  <span style="text-decoration: underline;">3</span>423. TRUE  high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2016-01-04 <span style="color: #949494;">00:32:00</span> 2016-01-04     3 5-egh-163     8 <span style="text-decoration: underline;">10</span>000. TRUE  low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2016-01-05 <span style="color: #949494;">13:32:00</span> 2016-01-05     6 8-kdg-938     3  <span style="text-decoration: underline;">2</span>343. TRUE  high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2016-01-06 <span style="color: #949494;">17:23:00</span> 2016-01-06     2 5-jdo-903    <span style="color: #BB0000;">NA</span>  <span style="text-decoration: underline;">3</span>892. FALSE mid  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2016-01-09 <span style="color: #949494;">12:36:00</span> 2016-01-09     8 3-ldm-038     7   284. TRUE  low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2016-01-11 <span style="color: #949494;">06:15:00</span> 2016-01-11     4 2-dhe-923     4  <span style="text-decoration: underline;">3</span>291. TRUE  mid  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2016-01-15 <span style="color: #949494;">18:46:00</span> 2016-01-15     7 1-knw-093     3   843. TRUE  high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2016-01-17 <span style="color: #949494;">11:27:00</span> 2016-01-17     4 5-boe-639     2  <span style="text-decoration: underline;">1</span>036. FALSE low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2016-01-20 <span style="color: #949494;">04:30:00</span> 2016-01-20     3 5-bce-642     9   838. FALSE high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2016-01-20 <span style="color: #949494;">04:30:00</span> 2016-01-20     3 5-bce-642     9   838. FALSE high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> 2016-01-26 <span style="color: #949494;">20:07:00</span> 2016-01-26     4 2-dmx-010     7   834. TRUE  low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> 2016-01-28 <span style="color: #949494;">02:51:00</span> 2016-01-28     2 7-dmx-010     8   108. FALSE low  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">13</span> 2016-01-30 <span style="color: #949494;">11:23:00</span> 2016-01-30     1 3-dka-303    <span style="color: #BB0000;">NA</span>  <span style="text-decoration: underline;">2</span>230. TRUE  high </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Debemos pensar en lo que es tolerable en</span></span>
<span class="r-in"><span class="co"># términos de calidad de los datos, así que</span></span>
<span class="r-in"><span class="co"># designemos umbrales de falla proporcionales</span></span>
<span class="r-in"><span class="co"># a los estados `warn`,` stop` y `notify`</span></span>
<span class="r-in"><span class="co"># usando `action_levels()`</span></span>
<span class="r-in"><span class="va">al</span> <span class="op">&lt;-</span> </span>
<span class="r-in">  <span class="fu"><a href="action_levels.html">action_levels</a></span><span class="op">(</span></span>
<span class="r-in">      warn_at <span class="op">=</span> <span class="fl">0.10</span>,</span>
<span class="r-in">      stop_at <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span class="r-in">    notify_at <span class="op">=</span> <span class="fl">0.35</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Ahora cree un objeto `agent` en blanco y</span></span>
<span class="r-in"><span class="co"># asígnele el objeto` al` (que sirve como valor</span></span>
<span class="r-in"><span class="co"># predeterminado para todos los pasos de</span></span>
<span class="r-in"><span class="co"># validación que se pueden anular); los umbrales</span></span>
<span class="r-in"><span class="co"># estáticos proporcionados por `al` harán que</span></span>
<span class="r-in"><span class="co"># los informes sean un poco más útiles</span></span>
<span class="r-in"><span class="va">agent</span> <span class="op">&lt;-</span> </span>
<span class="r-in">  <span class="fu">create_agent</span><span class="op">(</span></span>
<span class="r-in">    read_fn <span class="op">=</span> <span class="op">~</span> <span class="va">small_table</span>,</span>
<span class="r-in">    tbl_name <span class="op">=</span> <span class="st">"small_table"</span>,</span>
<span class="r-in">    label <span class="op">=</span> <span class="st">"Un ejemplo."</span>,</span>
<span class="r-in">    actions <span class="op">=</span> <span class="va">al</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Luego, como con cualquier objeto `agent`,</span></span>
<span class="r-in"><span class="co"># podemos agregar pasos al plan de validación</span></span>
<span class="r-in"><span class="co"># usando tantas funciones de validación como</span></span>
<span class="r-in"><span class="co"># queramos; luego, usamos `interrogate()`</span></span>
<span class="r-in"><span class="co"># para realizar físicamente las validaciones</span></span>
<span class="r-in"><span class="co"># y recopilar información</span></span>
<span class="r-in"><span class="va">agent</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="va">agent</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span>
<span class="r-in">  <span class="fu"><a href="col_exists.html">col_exists</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">date_time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_regex.html">col_vals_regex</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span>,</span>
<span class="r-in">    regex <span class="op">=</span> <span class="st">"[0-9]-[a-z]{3}-[0-9]{3}"</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="rows_distinct.html">rows_distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_gt.html">col_vals_gt</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_lte.html">col_vals_lte</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span>, value <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_equal.html">col_vals_equal</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>,</span>
<span class="r-in">    na_pass <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="col_vals_between.html">col_vals_between</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span>,</span>
<span class="r-in">    left <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, right <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>,</span>
<span class="r-in">    na_pass <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="interrogate.html">interrogate</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in">  </span>
<span class="r-in"><span class="co"># Llamar a un objeto *agent* en la consola</span></span>
<span class="r-in"><span class="co"># imprime el informe del agente; pero</span></span>
<span class="r-in"><span class="co"># podemos obtener un objeto `gt_tbl`</span></span>
<span class="r-in"><span class="co"># directamente con `get_agent_report(agent)`</span></span>
<span class="r-in"><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_agent_report.html">get_agent_report</a></span><span class="op">(</span><span class="va">agent</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ptblank_agent_report" "gt_tbl"               "list"                </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># ¿Qué puedes hacer con el informe? Imprima</span></span>
<span class="r-in"><span class="co"># desde un fragmento de código R Markdown,</span></span>
<span class="r-in"><span class="co"># úselo en un correo electrónico **blastula**,</span></span>
<span class="r-in"><span class="co"># colóquelo en una página web o modifíquelo</span></span>
<span class="r-in"><span class="co"># con el paquete **gt**</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Por el informe sabemos que el Paso 4</span></span>
<span class="r-in"><span class="co"># tenía dos unidades de prueba (filas,</span></span>
<span class="r-in"><span class="co"># en realidad) que fallaron; podemos ver</span></span>
<span class="r-in"><span class="co"># esas filas con `get_data_extracts()`</span></span>
<span class="r-in"><span class="va">agent</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="get_data_extracts.html">get_data_extracts</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   date_time           date           a b             c     d e     f    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2016-01-20 <span style="color: #949494;">04:30:00</span> 2016-01-20     3 5-bce-642     9  838. FALSE high </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2016-01-20 <span style="color: #949494;">04:30:00</span> 2016-01-20     3 5-bce-642     9  838. FALSE high </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Podemos obtener una 'x-list' para toda</span></span>
<span class="r-in"><span class="co"># la validación (8 pasos), o solo para el</span></span>
<span class="r-in"><span class="co"># cuarto paso con `get_agent_x_list()`</span></span>
<span class="r-in"><span class="va">xl_step_4</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="va">agent</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="get_agent_x_list.html">get_agent_x_list</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span class="r-in"> </span>
<span class="r-in"><span class="co"># Y luego podemos examinar las diferentes</span></span>
<span class="r-in"><span class="co"># partes de la lista; obtengamos la fracción</span></span>
<span class="r-in"><span class="co"># de unidades de prueba que fallaron</span></span>
<span class="r-in"><span class="va">xl_step_4</span><span class="op">$</span><span class="va">f_failed</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.15385</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Simplemente imprimiendo la lista x nos</span></span>
<span class="r-in"><span class="co"># dirá qué hay disponible allí</span></span>
<span class="r-in"><span class="va">xl_step_4</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── The x-list for `small_table` ────────────────────────────────────── STEP 4 ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$time_start $time_end</span> (<span style="color: #BB0000;">POSIXct [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$label $tbl_name $tbl_src $tbl_src_details</span> (<span style="color: #BB0000;">chr [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$tbl</span> (<span style="color: #0000BB;">spec_tbl_df</span>, <span style="color: #0000BB;">tbl_df</span>, <span style="color: #0000BB;">tbl</span>, and <span style="color: #0000BB;">data.frame</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$col_names $col_types</span> (<span style="color: #BB0000;">chr [8]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$i $type $columns $values $label $briefs</span> (<span style="color: #00BB00;">mixed [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$eval_error $eval_warning</span> (<span style="color: #BBBB00;">lgl [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$capture_stack</span> (<span style="color: #FFAF00;">list [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$n $n_passed $n_failed $f_passed $f_failed</span> (<span style="color: #00BB00;">num [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$warn $stop $notify</span> (<span style="color: #BBBB00;">lgl [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">$lang</span> (<span style="color: #BB0000;">chr [1]</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ────────────────────────────────────────────────────────────────────────────────</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Una 'x-list' que no sea específica de</span></span>
<span class="r-in"><span class="co"># ningún paso tendrá mucha más información</span></span>
<span class="r-in"><span class="co"># y una estructura ligeramente diferente; ver</span></span>
<span class="r-in"><span class="co"># `help(get_agent_x_list)` para más información</span></span>
<span class="r-in"><span class="co"># get_agent_x_list(agent)</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Richard Iannone, Mauricio Vargas.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

