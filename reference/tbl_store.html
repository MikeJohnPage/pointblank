<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='It can be useful to set up all the data sources you need and just draw from
them when necessary. This upfront configuration with tbl_store() lets us
define the methods for obtaining tabular data from mixed sources (e.g.,
database tables, tables generated from flat files, etc.) and provide names
for these data preparation procedures. Then we have a convenient way to
access the materialized tables with tbl_get(), or, the table-prep formulas
with tbl_source(). Table-prep formulas can be as simple as getting a table
from a location, or, it can involve as much mutation as is necessary (imagine
procuring several mutated variations of the same source table, generating a
table from multiple sources, or pre-filtering a database table according to
the system time). Another nice aspect of organizing table-prep formulas in a
single object is supplying it to the tbl argument of create_agent() or
create_informant() via $ notation (e.g, create_agent(tbl = &amp;lt;tbl_store&amp;gt;$&amp;lt;name&amp;gt;)) or with tbl_source() (e.g., create_agent(tbl = ~ tbl_source("&amp;lt;name&amp;gt;", &amp;lt;tbl_store&amp;gt;))).'><title>Define a store of tables with table-prep formulas: a table store — tbl_store • pointblank</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define a store of tables with table-prep formulas: a table store — tbl_store"><meta property="og:description" content='It can be useful to set up all the data sources you need and just draw from
them when necessary. This upfront configuration with tbl_store() lets us
define the methods for obtaining tabular data from mixed sources (e.g.,
database tables, tables generated from flat files, etc.) and provide names
for these data preparation procedures. Then we have a convenient way to
access the materialized tables with tbl_get(), or, the table-prep formulas
with tbl_source(). Table-prep formulas can be as simple as getting a table
from a location, or, it can involve as much mutation as is necessary (imagine
procuring several mutated variations of the same source table, generating a
table from multiple sources, or pre-filtering a database table according to
the system time). Another nice aspect of organizing table-prep formulas in a
single object is supplying it to the tbl argument of create_agent() or
create_informant() via $ notation (e.g, create_agent(tbl = &amp;lt;tbl_store&amp;gt;$&amp;lt;name&amp;gt;)) or with tbl_source() (e.g., create_agent(tbl = ~ tbl_source("&amp;lt;name&amp;gt;", &amp;lt;tbl_store&amp;gt;))).'><meta property="og:image" content="https://rich-iannone.github.io/pointblank/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pointblank</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Validation Workflows</h6>
    <a class="dropdown-item" href="../articles/validation_workflows.html">Overview</a>
    <a class="dropdown-item" href="../articles/VALID-I.html">VALID-I: Data Quality Reporting</a>
    <a class="dropdown-item" href="../articles/VALID-II.html">VALID-II: Pipeline Data Validation</a>
    <a class="dropdown-item" href="../articles/VALID-III.html">VALID-III: Expectations in Unit Tests</a>
    <a class="dropdown-item" href="../articles/VALID-IV.html">VALID-IV: Data Tests for Conditionals</a>
    <a class="dropdown-item" href="../articles/VALID-V.html">VALID-V: Table Scan</a>
    <a class="dropdown-item" href="../articles/VALID-VI.html">VALID-VI: R Markdown Document Validation</a>
    <h6 class="dropdown-header" data-toc-skip>Information Management</h6>
    <a class="dropdown-item" href="../articles/INFO-1.html">Intro to Information Management</a>
    <a class="dropdown-item" href="../articles/INFO-2.html">Advanced Information Management</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="https://rich-iannone.github.io/pointblank/es">En Español</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rich-iannone/pointblank/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Define a store of tables with table-prep formulas: a table store</h1>
      <small class="dont-index">Source: <a href="https://github.com/rich-iannone/pointblank/blob/HEAD/R/tbl_store.R" class="external-link"><code>R/tbl_store.R</code></a></small>
      <div class="d-none name"><code>tbl_store.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>It can be useful to set up all the data sources you need and just draw from
them when necessary. This upfront configuration with <code>tbl_store()</code> lets us
define the methods for obtaining tabular data from mixed sources (e.g.,
database tables, tables generated from flat files, etc.) and provide names
for these data preparation procedures. Then we have a convenient way to
access the materialized tables with <code><a href="tbl_get.html">tbl_get()</a></code>, or, the table-prep formulas
with <code><a href="tbl_source.html">tbl_source()</a></code>. Table-prep formulas can be as simple as getting a table
from a location, or, it can involve as much mutation as is necessary (imagine
procuring several mutated variations of the same source table, generating a
table from multiple sources, or pre-filtering a database table according to
the system time). Another nice aspect of organizing table-prep formulas in a
single object is supplying it to the <code>tbl</code> argument of <code><a href="create_agent.html">create_agent()</a></code> or
<code><a href="create_informant.html">create_informant()</a></code> via <code>$</code> notation (e.g, <code>create_agent(tbl = &lt;tbl_store&gt;$&lt;name&gt;)</code>) or with <code><a href="tbl_source.html">tbl_source()</a></code> (e.g., <code>create_agent(tbl = ~ tbl_source("&lt;name&gt;", &lt;tbl_store&gt;))</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">tbl_store</span><span class="op">(</span><span class="va">...</span>, .list <span class="op">=</span> <span class="fu">list2</span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>Expressions that contain table-prep formulas and table names for
data retrieval. Two-sided formulas (e.g, <code>&lt;LHS&gt; ~ &lt;RHS&gt;</code>) are to be used,
where the left-hand side is a given name and the right-hand is the portion
that is is used to obtain the table.</p></dd>
<dt>.list</dt>
<dd><p>Allows for the use of a list as an input alternative to <code>...</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>tbl_store</code> object that contains table-prep formulas.</p>
    </div>
    <div class="section level2">
    <h2 id="yaml">YAML<a class="anchor" aria-label="anchor" href="#yaml"></a></h2>
    

<p>A <strong>pointblank</strong> table store can be written to YAML with <code><a href="yaml_write.html">yaml_write()</a></code> and
the resulting YAML can be used in several ways. The ideal scenario is to have
pointblank agents and informants also in YAML form. This way the agent and
informant can refer to the table store YAML (via <code><a href="tbl_source.html">tbl_source()</a></code>), and, the
processing of both agents and informants can be performed with
<code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate()</a></code> and <code><a href="yaml_informant_incorporate.html">yaml_informant_incorporate()</a></code>. With the
following R code, a table store with two table-prep formulas is generated and
written to YAML (if no filename is given then the YAML is written to
<code>"tbl_store.yml"</code>).</p><div class="sourceCode"><pre><code><span class="co"># R statement for generating the "tbl_store.yml" file</span>
<span class="fu"><a href="../reference/tbl_store.html">tbl_store</a></span><span class="op">(</span>
  <span class="va">tbl_duckdb</span> <span class="op">~</span> <span class="fu"><a href="../reference/db_tbl.html">db_tbl</a></span><span class="op">(</span><span class="va">small_table</span>, dbname <span class="op">=</span> <span class="st">":memory:"</span>, dbtype <span class="op">=</span> <span class="st">"duckdb"</span><span class="op">)</span>,
  <span class="va">sml_table_high</span> <span class="op">~</span> <span class="va">small_table</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">f</span> <span class="op">==</span> <span class="st">"high"</span><span class="op">)</span>
<span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/yaml_write.html">yaml_write</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># YAML representation ("tbl_store.yml")</span>
<span class="va">tbls</span><span class="op">:</span>
  <span class="va">tbl_duckdb</span><span class="op">:</span> <span class="op">~</span> <span class="fu"><a href="../reference/db_tbl.html">db_tbl</a></span><span class="op">(</span><span class="va">small_table</span>, dbname <span class="op">=</span> <span class="st">":memory:"</span>, dbtype <span class="op">=</span> <span class="st">"duckdb"</span><span class="op">)</span>
  <span class="va">sml_table_high</span><span class="op">:</span> <span class="op">~</span> <span class="va">small_table</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">f</span> <span class="op">==</span> <span class="st">"high"</span><span class="op">)</span></code></pre></div>

<p>This is useful when you want to get fresh pulls of prepared data from a
source materialized in an R session (with the <code><a href="tbl_get.html">tbl_get()</a></code> function. For
example, the <code>sml_table_high</code> table can be obtained by using
<code>tbl_get("sml_table_high", "tbl_store.yml")</code>. To get an agent to check this
prepared data periodically, then the following example with <code><a href="tbl_source.html">tbl_source()</a></code>
will be useful:</p><div class="sourceCode"><pre><code># Generate agent that checks `sml_table_high`, write it to YAML
create_agent(
  tbl = ~ tbl_source("sml_table_high", "tbl_store.yml"),
  label = "An example that uses a table store.",
  actions = action_levels(warn_at = 0.10)
) %&gt;% 
  col_exists(vars(date, date_time)) %&gt;%
  write_yaml()
  
# YAML representation ("agent-sml_table_high.yml")
tbl: ~ tbl_source("sml_table_high", "tbl_store.yml")
tbl_name: sml_table_high
label: An example that uses a table store.
actions:
  warn_fraction: 0.1
locale: en
steps:
  - col_exists:
    columns: vars(date, date_time)
</code></pre></div>

<p>Now, whenever the <code>sml_table_high</code> table needs to be validated, it can be
done with <code><a href="yaml_agent_interrogate.html">yaml_agent_interrogate()</a></code> (e.g.,
<code>yaml_agent_interrogate("agent-sml_table_high.yml")</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="function-id">Function ID<a class="anchor" aria-label="anchor" href="#function-id"></a></h2>
    

<p>1-8</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Planning and Prep: 
<code><a href="action_levels.html">action_levels</a>()</code>,
<code><a href="create_agent.html">create_agent</a>()</code>,
<code><a href="create_informant.html">create_informant</a>()</code>,
<code><a href="db_tbl.html">db_tbl</a>()</code>,
<code><a href="draft_validation.html">draft_validation</a>()</code>,
<code><a href="file_tbl.html">file_tbl</a>()</code>,
<code><a href="scan_data.html">scan_data</a>()</code>,
<code><a href="tbl_get.html">tbl_get</a>()</code>,
<code><a href="tbl_source.html">tbl_source</a>()</code>,
<code><a href="validate_rmd.html">validate_rmd</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Define a `tbl_store` object by adding</span></span>
<span class="r-in"><span class="co"># table-prep formulas inside the</span></span>
<span class="r-in"><span class="co"># `tbl_store()` call</span></span>
<span class="r-in"><span class="va">tbls</span> <span class="op">&lt;-</span> </span>
<span class="r-in">  <span class="fu">tbl_store</span><span class="op">(</span></span>
<span class="r-in">    <span class="va">small_table_duck</span> <span class="op">~</span> <span class="fu"><a href="db_tbl.html">db_tbl</a></span><span class="op">(</span></span>
<span class="r-in">      table <span class="op">=</span> <span class="va">small_table</span>,</span>
<span class="r-in">      dbname <span class="op">=</span> <span class="st">":memory:"</span>,</span>
<span class="r-in">      dbtype <span class="op">=</span> <span class="st">"duckdb"</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    <span class="op">~</span> <span class="fu"><a href="db_tbl.html">db_tbl</a></span><span class="op">(</span></span>
<span class="r-in">      table <span class="op">=</span> <span class="st">"rna"</span>,</span>
<span class="r-in">      dbname <span class="op">=</span> <span class="st">"pfmegrnargs"</span>,</span>
<span class="r-in">      dbtype <span class="op">=</span> <span class="st">"postgres"</span>,</span>
<span class="r-in">      host <span class="op">=</span> <span class="st">"hh-pgsql-public.ebi.ac.uk"</span>,</span>
<span class="r-in">      port <span class="op">=</span> <span class="fl">5432</span>,</span>
<span class="r-in">      user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="st">"reader"</span><span class="op">)</span>,</span>
<span class="r-in">      password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="st">"NWDMCE5xdipIjRrp"</span><span class="op">)</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    <span class="va">all_revenue</span> <span class="op">~</span> <span class="fu"><a href="db_tbl.html">db_tbl</a></span><span class="op">(</span></span>
<span class="r-in">      table <span class="op">=</span> <span class="fu"><a href="file_tbl.html">file_tbl</a></span><span class="op">(</span></span>
<span class="r-in">        file <span class="op">=</span> <span class="fu"><a href="from_github.html">from_github</a></span><span class="op">(</span></span>
<span class="r-in">          file <span class="op">=</span> <span class="st">"all_revenue_large.rds"</span>,</span>
<span class="r-in">          repo <span class="op">=</span> <span class="st">"rich-iannone/intendo"</span>,</span>
<span class="r-in">          subdir <span class="op">=</span> <span class="st">"data-large"</span></span>
<span class="r-in">        <span class="op">)</span></span>
<span class="r-in">      <span class="op">)</span>,</span>
<span class="r-in">      dbname <span class="op">=</span> <span class="st">":memory:"</span>,</span>
<span class="r-in">      dbtype <span class="op">=</span> <span class="st">"duckdb"</span></span>
<span class="r-in">    <span class="op">)</span>,</span>
<span class="r-in">    <span class="va">sml_table</span> <span class="op">~</span> <span class="fu">pointblank</span><span class="fu">::</span><span class="va"><a href="small_table.html">small_table</a></span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Once this object is available, you</span></span>
<span class="r-in"><span class="co"># can check that the table of interest</span></span>
<span class="r-in"><span class="co"># is produced to your specification with</span></span>
<span class="r-in"><span class="co"># the `tbl_get()` function</span></span>
<span class="r-in"><span class="fu"><a href="tbl_get.html">tbl_get</a></span><span class="op">(</span></span>
<span class="r-in">  tbl <span class="op">=</span> <span class="st">"small_table_duck"</span>,</span>
<span class="r-in">  store <span class="op">=</span> <span class="va">tbls</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Another simpler way to get the same</span></span>
<span class="r-in"><span class="co"># table materialized is by using `$` to</span></span>
<span class="r-in"><span class="co"># get the entry of choice for `tbl_get()`</span></span>
<span class="r-in"><span class="va">tbls</span><span class="op">$</span><span class="va">small_table_duck</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="tbl_get.html">tbl_get</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Creating an agent is easy when all</span></span>
<span class="r-in"><span class="co"># table-prep formulas are encapsulated</span></span>
<span class="r-in"><span class="co"># in a `tbl_store` object; use `$` </span></span>
<span class="r-in"><span class="co"># notation to pass the appropriate</span></span>
<span class="r-in"><span class="co"># procedure for reading a table to the</span></span>
<span class="r-in"><span class="co"># `tbl` argument</span></span>
<span class="r-in"><span class="va">agent_1</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="create_agent.html">create_agent</a></span><span class="op">(</span></span>
<span class="r-in">    tbl <span class="op">=</span> <span class="va">tbls</span><span class="op">$</span><span class="va">small_table_duck</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in">  </span>
<span class="r-in"><span class="co"># There are other ways to use the</span></span>
<span class="r-in"><span class="co"># table store to assign a target table</span></span>
<span class="r-in"><span class="co"># to an agent, like using the</span></span>
<span class="r-in"><span class="co"># `tbl_source()` function</span></span>
<span class="r-in"><span class="va">agent_2</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="create_agent.html">create_agent</a></span><span class="op">(</span></span>
<span class="r-in">    tbl <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="tbl_source.html">tbl_source</a></span><span class="op">(</span></span>
<span class="r-in">      tbl <span class="op">=</span> <span class="st">"small_table_duck"</span>,</span>
<span class="r-in">      store <span class="op">=</span> <span class="va">tbls</span></span>
<span class="r-in">      <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The table store can be moved to</span></span>
<span class="r-in"><span class="co"># YAML with `yaml_write` and the</span></span>
<span class="r-in"><span class="co"># `tbl_source()` call could then</span></span>
<span class="r-in"><span class="co"># refer to that on-disk table store;</span></span>
<span class="r-in"><span class="co"># let's do that YAML conversion</span></span>
<span class="r-in"><span class="fu"><a href="yaml_write.html">yaml_write</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The above writes the `tbl_store.yml`</span></span>
<span class="r-in"><span class="co"># file (by not providing a `filename`</span></span>
<span class="r-in"><span class="co"># this default filename is chosen);</span></span>
<span class="r-in"><span class="co"># next, modify the `tbl_source()`</span></span>
<span class="r-in"><span class="co"># so that `store` refer to the YAML</span></span>
<span class="r-in"><span class="co"># file</span></span>
<span class="r-in"><span class="va">agent_3</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="create_agent.html">create_agent</a></span><span class="op">(</span></span>
<span class="r-in">    tbl <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="tbl_source.html">tbl_source</a></span><span class="op">(</span></span>
<span class="r-in">      tbl <span class="op">=</span> <span class="st">"small_table_duck"</span>,</span>
<span class="r-in">      store <span class="op">=</span> <span class="st">"tbl_store.yml"</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Richard Iannone, Mauricio Vargas.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.1.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

